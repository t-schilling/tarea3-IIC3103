{"ast":null,"code":"import _slicedToArray from \"/home/thomas/Desktop/XII Semestre/Taller de Integraci\\xF3n/Tarea 3/tarea-3-t-schilling/cliente/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"/home/thomas/Desktop/XII Semestre/Taller de Integraci\\xF3n/Tarea 3/tarea-3-t-schilling/cliente/src/componentes/Info.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport socket from './Socket';\nimport { MapContainer, TileLayer, Polyline, Tooltip, Marker } from 'react-leaflet';\nimport './Map.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar Info = function Info() {\n  _s();\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      trucks = _useState2[0],\n      setTrucks = _useState2[1];\n\n  var _useState3 = useState([[]]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      positions = _useState4[0],\n      setPosition = _useState4[1];\n\n  useEffect(function () {\n    console.log('Recibiendo info de TRUCKS');\n    socket.on('TRUCKS', function (truck) {\n      setTrucks(trucks.concat(truck));\n    });\n    return function () {\n      socket.off();\n    };\n  }, [trucks]);\n  useEffect(function () {\n    socket.on('POSITION', function (_ref) {\n      var code = _ref.code,\n          position = _ref.position;\n      setPosition(positions.concat({\n        code: code,\n        position: position\n      }));\n    });\n  });\n  useEffect(function () {\n    socket.on('FAILURE', function (_ref2) {\n      var code = _ref2.code,\n          source = _ref2.source;\n      var truck = trucks.find(function (element) {\n        return element.code === code;\n      });\n\n      if (typeof truck === undefined) {\n        return \"Truck not found\";\n      } else {\n        console.log('Actualizando el valor de truck:' + code);\n        truck.status = source;\n      }\n    });\n  });\n  useEffect(function () {\n    socket.on('FIX', function (code) {\n      console.log('solucionando el problema de: ' + code);\n      var truck = trucks.find(function (element) {\n        return element.code === code;\n      });\n\n      if (typeof truck === undefined) {\n        return \"Truck not found\";\n      } else {\n        truck.status = 'Ok';\n      }\n    });\n  });\n\n  var truckInfo = function truckInfo(code) {\n    var truck = trucks.find(function (element) {\n      return element.code === code;\n    });\n\n    if (typeof truck === undefined) {\n      return \"Truck not found\";\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"'Truck:' \", truck.truck]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 13\n      }, _this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 42\n      }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"'Code: \", truck.code]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 13\n      }, _this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 39\n      }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"'Origin: \", truck.origin, \" -- Destination: \", truck.destination]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 13\n      }, _this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 79\n      }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"'Status: \", truck.status]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 13\n      }, _this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 44\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 17\n    }, _this);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Trucks Information:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 18\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"info\",\n      children: trucks.map(function (e, i) {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [\"Code: \", e.code, \" - origin: \", e.origin, \" - destination: \", e.destination, \" - truck: \", e.truck, \" - status: \", e.status, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 73,\n              columnNumber: 132\n            }, _this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 73,\n              columnNumber: 138\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 21\n          }, _this)\n        }, i, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 38\n        }, _this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 13\n    }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(MapContainer, {\n        center: [0, 0],\n        zoom: 3,\n        scrollWheelZoom: false,\n        children: [/*#__PURE__*/_jsxDEV(TileLayer, {\n          attribution: \"\\xA9 <a href=\\\"http://osm.org/copyright\\\">OpenStreetMap</a> contributors\",\n          url: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 17\n        }, _this), trucks.map(function (dat) {\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(Polyline, {\n              pathOptions: {\n                color: 'black'\n              },\n              positions: [dat.origin, dat.destination]\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 86,\n              columnNumber: 25\n            }, _this)\n          }, dat.code, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 25\n          }, _this);\n        }), positions.map(function (data) {\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(Marker, {\n              center: data.position,\n              radius: 100,\n              children: /*#__PURE__*/_jsxDEV(Tooltip, {\n                children: truckInfo(data.code)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 96,\n                columnNumber: 33\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 95,\n              columnNumber: 29\n            }, _this)\n          }, data.position, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 25\n          }, _this);\n        })]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 13\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 13\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 9\n  }, _this);\n};\n\n_s(Info, \"k+fcIg2SsXT9mZGua9ofNxUNLZM=\");\n\n_c = Info;\nexport default Info;\n\nvar _c;\n\n$RefreshReg$(_c, \"Info\");","map":{"version":3,"sources":["/home/thomas/Desktop/XII Semestre/Taller de IntegraciÃ³n/Tarea 3/tarea-3-t-schilling/cliente/src/componentes/Info.js"],"names":["React","useState","useEffect","socket","MapContainer","TileLayer","Polyline","Tooltip","Marker","Info","trucks","setTrucks","positions","setPosition","console","log","on","truck","concat","off","code","position","source","find","element","undefined","status","truckInfo","origin","destination","map","e","i","dat","color","data"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react';\nimport socket from './Socket';\nimport { MapContainer, TileLayer, Polyline, Tooltip, Marker} from 'react-leaflet';\nimport './Map.css';\n\nconst Info = () => {\n\n    const[trucks, setTrucks] = useState([]);\n    const[positions, setPosition] = useState([[]]);\n\n    \n    useEffect(() => {\n        console.log('Recibiendo info de TRUCKS');\n        socket.on('TRUCKS', truck =>{\n            setTrucks(trucks.concat(truck));\n        });\n        return () => {socket.off()};\n    },[trucks]);\n\n    useEffect(() => {\n        socket.on( 'POSITION', ({code, position}) => {setPosition(positions.concat({code, position}))});\n    });\n\n    useEffect(() => {\n        socket.on('FAILURE', ({code, source}) => { \n            let truck  = trucks.find(element => element.code === code);\n            if (typeof(truck) === undefined){\n                return \"Truck not found\";\n            }\n            else{\n                console.log('Actualizando el valor de truck:' + code);\n                truck.status = source;\n            }\n        });\n    });\n\n    useEffect(() => {\n        socket.on('FIX', (code) =>{\n            console.log('solucionando el problema de: ' + code);\n            let truck  = trucks.find(element => element.code === code);\n            if (typeof(truck) === undefined){\n                return \"Truck not found\";\n            }\n            else{\n                truck.status = 'Ok';\n            }\n        });\n    });\n\n    const truckInfo = (code) => {\n        let truck  = trucks.find(element => element.code === code);\n        if (typeof(truck) === undefined){\n            return \"Truck not found\";\n        }\n        return (<div>\n            <p>'Truck:' {truck.truck}</p><br />\n            <p>'Code: {truck.code}</p><br />\n            <p>'Origin: {truck.origin} -- Destination: {truck.destination}</p><br />\n            <p>'Status: {truck.status}</p> <br />\n        </div>)   \n    };\n\n\n    \n\n\n    return (\n\n        <div>\n            <div><h2>Trucks Information:</h2></div>\n            <div className=\"info\"> \n                {trucks.map((e,i) => <div  key={i}> \n                    <div>Code: {e.code} - origin: {e.origin} - destination: {e.destination} - truck: {e.truck} - status: {e.status}<br /><br /></div>\n                </div>)}\n            </div>\n            <div>\n            <MapContainer center={[0,0]} zoom={3} scrollWheelZoom={false}>\n                <TileLayer\n                attribution='&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n                url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n                />\n                \n                {trucks.map((dat) => {\n                    return (\n                        <div key={dat.code}>\n                        <Polyline pathOptions={{color:'black'}} positions={[dat.origin, dat.destination]} />\n                        </div>\n                    )\n                })}\n            \n                {positions.map((data) => {\n                    return (\n                        \n                        <div key={data.position}>\n                            <Marker center={data.position} radius={100}>\n                                <Tooltip>\n                                    {truckInfo(data.code)}                                \n                                </Tooltip>\n                            </Marker>\n                        </div>\n                    )})}\n                            \n            </MapContainer>\n            </div>\n\n\n\n\n        </div>\n\n    )\n}\n\nexport default Info;"]},"metadata":{},"sourceType":"module"}