{"ast":null,"code":"import _slicedToArray from \"/home/thomas/Desktop/XII Semestre/Taller de Integraci\\xF3n/Tarea 3/tarea-3-t-schilling/cliente/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"/home/thomas/Desktop/XII Semestre/Taller de Integraci\\xF3n/Tarea 3/tarea-3-t-schilling/cliente/src/componentes/Info.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport socket from './Socket';\nimport { MapContainer, TileLayer, Polyline, Tooltip, Marker } from 'react-leaflet';\nimport './Map.css';\nimport './../App.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar Info = function Info() {\n  _s();\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      trucks = _useState2[0],\n      setTrucks = _useState2[1];\n\n  var _useState3 = useState([[]]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      positions = _useState4[0],\n      setPosition = _useState4[1];\n\n  useEffect(function () {\n    console.log('Recibiendo info de TRUCKS');\n    socket.on('TRUCKS', function (truck) {\n      console.log('--->el code es' + truck[0].code);\n      setTrucks(trucks.concat(truck));\n    });\n    return function () {\n      socket.off('TRUCKS');\n    };\n  }, [trucks]);\n  useEffect(function () {\n    socket.on('POSITION', function (_ref) {\n      var code = _ref.code,\n          position = _ref.position;\n      setPosition(positions.concat({\n        code: code,\n        position: position\n      }));\n    });\n    return function () {\n      socket.off('POSITION');\n    };\n  });\n  useEffect(function () {\n    socket.on('FAILURE', function (_ref2) {\n      var code = _ref2.code,\n          source = _ref2.source;\n      var truck = trucks.find(function (element) {\n        return element.code === code;\n      });\n\n      if (typeof truck === undefined) {\n        return \"Truck not found\";\n      } else {\n        console.log('Actualizando el valor de truck:' + code);\n        truck.status = source;\n      }\n    });\n    return function () {\n      socket.off('FAILURE');\n    };\n  });\n  useEffect(function () {\n    socket.on('FIX', function (truck_object) {\n      console.log('solucionando el problema de: ' + truck_object.code);\n      var truck = trucks.find(function (element) {\n        return element.code === truck_object.code;\n      });\n\n      if (typeof truck === undefined) {\n        return \"Truck not found\";\n      } else {\n        truck.status = 'Ok';\n      }\n    });\n    return function () {\n      socket.off('FIX');\n    };\n  });\n\n  var truckInfo = function truckInfo(code) {\n    console.log('entrer');\n    var truck = trucks.find(function (element) {\n      return element.code === code;\n    });\n    console.log(truck);\n\n    if (truck === undefined) {\n      console.log(\"vamos a retornar natty\");\n      return \"Truck not found\";\n    }\n\n    console.log('ahora tenemos' + truck);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"'Truck:' \", truck.truck]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 13\n      }, _this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 42\n      }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"'Code: '\", truck.code]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 13\n      }, _this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 40\n      }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"'Origin: '\", truck.origin, \"' -- Destination: '\", truck.destination]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 13\n      }, _this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 82\n      }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"'Status: '\", truck.status]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 13\n      }, _this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 45\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 17\n    }, _this);\n  };\n\n  var fixTruck = function fixTruck(truckCode) {\n    console.log('Vamos a reparar el siguiente camion: ' + truckCode);\n    socket.emit('FIX', {\n      code: truckCode\n    });\n  };\n\n  var changeStatus = [];\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"info_titulo\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Trucks Information:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 18\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"solo_info\",\n      children: trucks.map(function (e, i) {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"truckInfo_container\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [\"Truck: \", e.truck]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 89,\n                columnNumber: 21\n              }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [\"Code: \", e.code]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 90,\n                columnNumber: 21\n              }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [\"Origin: \", e.origin, \" \"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 91,\n                columnNumber: 21\n              }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [\"Destination: \", e.destination, \" \"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 92,\n                columnNumber: 21\n              }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [\"Status: \", e.status, \" \"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 93,\n                columnNumber: 21\n              }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [\"if (e.status !=== 'Ok') \", /*#__PURE__*/_jsxDEV(\"button\", {\n                  children: \"Fix Truck\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 96,\n                  columnNumber: 25\n                }, _this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 94,\n                columnNumber: 21\n              }, _this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 88,\n              columnNumber: 21\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 17\n          }, _this)\n        }, i, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 38\n        }, _this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 13\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 83,\n    columnNumber: 9\n  }, _this);\n};\n\n_s(Info, \"k+fcIg2SsXT9mZGua9ofNxUNLZM=\");\n\n_c = Info;\nexport default Info;\n\nvar _c;\n\n$RefreshReg$(_c, \"Info\");","map":{"version":3,"sources":["/home/thomas/Desktop/XII Semestre/Taller de Integraci√≥n/Tarea 3/tarea-3-t-schilling/cliente/src/componentes/Info.js"],"names":["React","useState","useEffect","socket","MapContainer","TileLayer","Polyline","Tooltip","Marker","Info","trucks","setTrucks","positions","setPosition","console","log","on","truck","code","concat","off","position","source","find","element","undefined","status","truck_object","truckInfo","origin","destination","fixTruck","truckCode","emit","changeStatus","map","e","i"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react';\nimport socket from './Socket';\nimport { MapContainer, TileLayer, Polyline, Tooltip, Marker} from 'react-leaflet';\nimport './Map.css';\nimport './../App.css'\n\nconst Info = () => {\n\n    const[trucks, setTrucks] = useState([]);\n    const[positions, setPosition] = useState([[]]);\n\n    \n    useEffect(() => {\n        console.log('Recibiendo info de TRUCKS');\n        socket.on('TRUCKS', truck =>{\n            console.log('--->el code es' + truck[0].code)\n            setTrucks(trucks.concat(truck));\n            \n\n        });\n        return () => {socket.off('TRUCKS')};\n    },[trucks]);\n\n    useEffect(() => {\n        socket.on( 'POSITION', ({code, position}) => {setPosition(positions.concat({code, position}))});\n        return () => {socket.off('POSITION')};\n    });\n\n    useEffect(() => {\n        socket.on('FAILURE', ({code, source}) => { \n            let truck  = trucks.find(element => element.code === code);\n            if (typeof(truck) === undefined){\n                return \"Truck not found\";\n            }\n            else{\n                console.log('Actualizando el valor de truck:' + code);\n                truck.status = source;\n            }\n        });\n        return () => {socket.off('FAILURE')}\n    });\n\n    useEffect(() => {\n        socket.on('FIX', (truck_object) =>{\n            console.log('solucionando el problema de: ' + truck_object.code);\n            let truck  = trucks.find(element => element.code === truck_object.code);\n            if (typeof(truck) === undefined){\n                return \"Truck not found\";\n            }\n            else{\n                truck.status = 'Ok';\n            }\n        });\n        return () => {socket.off('FIX')}\n    });\n\n    const truckInfo = (code) => {\n        console.log('entrer')\n        let truck  = trucks.find(element => element.code === code);\n        console.log(truck)\n        if (truck === undefined){\n            console.log(\"vamos a retornar natty\")\n            return (\"Truck not found\");\n        }\n        console.log('ahora tenemos' + truck)\n        return (<div>\n            <p>'Truck:' {truck.truck}</p><br />\n            <p>'Code: '{truck.code}</p><br />\n            <p>'Origin: '{truck.origin}' -- Destination: '{truck.destination}</p><br />\n            <p>'Status: '{truck.status}</p> <br />\n        </div>)   \n    };\n\n    const fixTruck = (truckCode) =>{\n        console.log('Vamos a reparar el siguiente camion: ' + truckCode);\n        socket.emit('FIX', {code : truckCode});\n    }\n\n    const changeStatus = []\n\n    return (\n\n        <div className=\"info_titulo\">\n            <div><h2>Trucks Information:</h2></div>\n            <div className=\"solo_info\"> \n                {trucks.map((e,i) => <div  key={i}> \n                <div> \n                    <div className='truckInfo_container'>\n                    <div>Truck: {e.truck}</div>\n                    <div>Code: {e.code}</div>\n                    <div>Origin: {e.origin} </div>\n                    <div>Destination: {e.destination} </div>\n                    <div>Status: {e.status} </div>\n                    <div>\n                    if (e.status !=== 'Ok') {\n                        <button>Fix Truck</button>\n                    }\n\n                   </div>\n                    </div>\n                </div>\n                </div>)}\n            </div>\n            \n\n\n\n\n        </div>\n\n    )\n}\n\nexport default Info;"]},"metadata":{},"sourceType":"module"}