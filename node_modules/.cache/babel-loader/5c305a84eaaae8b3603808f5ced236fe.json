{"ast":null,"code":"import _slicedToArray from\"/home/thomas/Desktop/XII Semestre/Taller de Integraci\\xF3n/Tarea 3/tarea-3-t-schilling/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import socket from'./Socket';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Chat=function Chat(_ref){var username=_ref.username;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),mensaje=_useState2[0],setMensaje=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),mensajes=_useState4[0],setMensajes=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),trucks=_useState6[0],setTrucks=_useState6[1];var _useState7=useState([[]]),_useState8=_slicedToArray(_useState7,2),positions=_useState8[0],setPosition=_useState8[1];useEffect(function(){//console.log('recibiendo mensajes')\nsocket.on('CHAT',function(_ref2){var date=_ref2.date,message=_ref2.message,name=_ref2.name;//console.log(name+':'+message + '->('+date+')');\nsetMensajes(mensajes.concat({date:date,message:message,name:name}));});return function(){socket.off('CHAT');};},[mensajes]);var submit=function submit(e){e.preventDefault();//console.log({message : mensaje, name : username})\nsocket.emit('CHAT',{message:mensaje,name:username});setMensaje(\"\");};return/*#__PURE__*/_jsxs(\"div\",{className:\"chat_todo\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"h2\",{children:\"Chat\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"chat\",children:mensajes.map(function(e,i){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{children:[\"[\",Date(e.date),\"] -- \",e.name,\": \",e.message]})},i);})}),/*#__PURE__*/_jsxs(\"form\",{className:\"chat_form\",onSubmit:submit,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"\",children:\" Escriba su mensaje :\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"\",id:\"\",cols:\"30\",value:mensaje,onChange:function onChange(e){return setMensaje(e.target.value);}}),/*#__PURE__*/_jsx(\"button\",{children:\" Enviar mensaje\"})]})]});};export default Chat;","map":{"version":3,"sources":["/home/thomas/Desktop/XII Semestre/Taller de IntegraciÃ³n/Tarea 3/tarea-3-t-schilling/src/componentes/Chat.js"],"names":["React","useState","useEffect","socket","Chat","username","mensaje","setMensaje","mensajes","setMensajes","trucks","setTrucks","positions","setPosition","on","date","message","name","concat","off","submit","e","preventDefault","emit","map","i","Date","target","value"],"mappings":"yKAAA,MAAOA,CAAAA,KAAP,EAAeC,QAAf,CAAyBC,SAAzB,KAAyC,OAAzC,CACA,MAAOC,CAAAA,MAAP,KAAmB,UAAnB,C,wFAEA,GAAMC,CAAAA,IAAI,CAAG,QAAPA,CAAAA,IAAO,MAAgB,IAAdC,CAAAA,QAAc,MAAdA,QAAc,CAEzB,cAA8BJ,QAAQ,CAAC,EAAD,CAAtC,wCAAOK,OAAP,eAAgBC,UAAhB,eACA,eAA+BN,QAAQ,CAAC,EAAD,CAAvC,yCAAMO,QAAN,eAAgBC,WAAhB,eAEA,eAA2BR,QAAQ,CAAC,EAAD,CAAnC,yCAAMS,MAAN,eAAcC,SAAd,eACA,eAAgCV,QAAQ,CAAC,CAAC,EAAD,CAAD,CAAxC,yCAAMW,SAAN,eAAiBC,WAAjB,eAGAX,SAAS,CAAC,UAAM,CACZ;AACAC,MAAM,CAACW,EAAP,CAAU,MAAV,CAAkB,eAA2B,IAAzBC,CAAAA,IAAyB,OAAzBA,IAAyB,CAAnBC,OAAmB,OAAnBA,OAAmB,CAAVC,IAAU,OAAVA,IAAU,CACzC;AACAR,WAAW,CAACD,QAAQ,CAACU,MAAT,CAAgB,CAACH,IAAI,CAAJA,IAAD,CAAOC,OAAO,CAAPA,OAAP,CAAgBC,IAAI,CAAJA,IAAhB,CAAhB,CAAD,CAAX,CACH,CAHD,EAKA,MAAO,WAAM,CACTd,MAAM,CAACgB,GAAP,CAAW,MAAX,EACL,CAFC,CAGH,CAVQ,CAUP,CAACX,QAAD,CAVO,CAAT,CAYA,GAAMY,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,CAACC,CAAD,CAAO,CAClBA,CAAC,CAACC,cAAF,GACA;AACAnB,MAAM,CAACoB,IAAP,CAAY,MAAZ,CAAoB,CAACP,OAAO,CAAGV,OAAX,CAAoBW,IAAI,CAAGZ,QAA3B,CAApB,EACAE,UAAU,CAAC,EAAD,CAAV,CACH,CALD,CAQA,mBAEI,aAAK,SAAS,CAAC,WAAf,wBACI,kCAAK,4BAAL,EADJ,cAEI,YAAK,SAAS,CAAC,MAAf,UACKC,QAAQ,CAACgB,GAAT,CAAa,SAACH,CAAD,CAAGI,CAAH,qBAAS,kCACnB,2BAAOC,IAAI,CAACL,CAAC,CAACN,IAAH,CAAX,SAA0BM,CAAC,CAACJ,IAA5B,MAAoCI,CAAC,CAACL,OAAtC,GADmB,EAAWS,CAAX,CAAT,EAAb,CADL,EAFJ,cAOI,cAAM,SAAS,CAAC,WAAhB,CAA4B,QAAQ,CAAEL,MAAtC,wBACI,cAAO,OAAO,CAAC,EAAf,mCADJ,cAGI,iBAAU,IAAI,CAAC,EAAf,CAAkB,EAAE,CAAC,EAArB,CAAwB,IAAI,CAAC,IAA7B,CAAkC,KAAK,CAAEd,OAAzC,CAAkD,QAAQ,CAAE,kBAAAe,CAAC,QAAId,CAAAA,UAAU,CAACc,CAAC,CAACM,MAAF,CAASC,KAAV,CAAd,EAA7D,EAHJ,cAMA,2CANA,GAPJ,GAFJ,CAsBH,CAnDD,CAqDA,cAAexB,CAAAA,IAAf","sourcesContent":["import React, {useState, useEffect} from 'react';\nimport socket from './Socket';\n\nconst Chat = ({username}) => {\n     \n    const [mensaje, setMensaje] = useState('');\n    const[mensajes, setMensajes] = useState([]);\n\n    const[trucks, setTrucks] = useState([]);\n    const[positions, setPosition] = useState([[]])\n\n\n    useEffect(() => {\n        //console.log('recibiendo mensajes')\n        socket.on('CHAT', ({date, message, name}) => {\n            //console.log(name+':'+message + '->('+date+')');\n            setMensajes(mensajes.concat({date, message, name}));\n        });\n        \n        return () => {\n            socket.off('CHAT');\n      };\n    },[mensajes]);\n\n    const submit = (e) => {\n        e.preventDefault();\n        //console.log({message : mensaje, name : username})\n        socket.emit('CHAT', {message : mensaje, name : username})\n        setMensaje(\"\");\n    }\n\n\n    return (\n\n        <div className=\"chat_todo\">\n            <div><h2>Chat</h2></div>\n            <div className=\"chat\"> \n                {mensajes.map((e,i) => <div  key={i}> \n                    <div>[{Date(e.date)}] -- {e.name}: {e.message}</div>\n                </div>)}\n            </div>\n            <form className=\"chat_form\" onSubmit={submit}>\n                <label htmlFor=\"\"> Escriba su mensaje : \n                </label>\n                <textarea name=\"\" id=\"\" cols=\"30\" value={mensaje} onChange={e => setMensaje(e.target.value)}>\n\n                </textarea>\n            <button> Enviar mensaje</button>\n\n\n            </form>\n\n        </div>\n    )\n}\n\nexport default Chat;"]},"metadata":{},"sourceType":"module"}