{"code":"(this.webpackJsonpcliente=this.webpackJsonpcliente||[]).push([[0],{29:function(e,t,n){},38:function(e,t,n){},45:function(e,t,n){},47:function(e,t,n){\"use strict\";n.r(t);var c=n(0),i=n.n(c),o=n(23),s=n.n(o),r=(n(38),n(7)),a=n(46).connect(\"wss://tarea-3-websocket.2021-2.tallerdeintegracion.cl\",{path:\"/trucks\"}),u=n(1),j=function(e){var t=e.username,n=Object(c.useState)(\"\"),i=Object(r.a)(n,2),o=i[0],s=i[1],j=Object(c.useState)([]),d=Object(r.a)(j,2),l=d[0],b=d[1],f=Object(c.useState)([]),O=Object(r.a)(f,2),h=(O[0],O[1],Object(c.useState)([[]])),m=Object(r.a)(h,2);m[0],m[1];Object(c.useEffect)((function(){return a.on(\"CHAT\",(function(e){var t=e.date,n=e.message,c=e.name;b(l.concat({date:t,message:n,name:c}))})),function(){a.off(\"CHAT\")}}),[l]);return Object(u.jsxs)(\"div\",{className:\"chat_todo\",children:[Object(u.jsx)(\"div\",{children:Object(u.jsx)(\"h2\",{children:\"Chat\"})}),Object(u.jsx)(\"div\",{className:\"chat\",children:l.map((function(e,t){return Object(u.jsx)(\"div\",{children:Object(u.jsxs)(\"div\",{children:[\"[\",Date(e.date),\"] -- \",e.name,\": \",e.message]})},t)}))}),Object(u.jsxs)(\"form\",{className:\"chat_form\",onSubmit:function(e){e.preventDefault(),a.emit(\"CHAT\",{message:o,name:t}),s(\"\")},children:[Object(u.jsx)(\"label\",{htmlFor:\"\",children:\" Escriba su mensaje :\"}),Object(u.jsx)(\"textarea\",{name:\"\",id:\"\",cols:\"30\",value:o,onChange:function(e){return s(e.target.value)}}),Object(u.jsx)(\"button\",{children:\" Enviar mensaje\"})]})]})},d=(n(25),n(50)),l=n(52),b=n(51),f=(n(45),n(29),function(){var e=Object(c.useState)([]),t=Object(r.a)(e,2),n=t[0],i=t[1],o=Object(c.useState)([[]]),s=Object(r.a)(o,2),j=s[0],f=s[1];Object(c.useEffect)((function(){return console.log(\"Recibiendo info de TRUCKS\"),a.on(\"TRUCKS\",(function(e){i(n.concat(e))})),function(){a.off(\"TRUCKS\")}}),[n]),Object(c.useEffect)((function(){return a.on(\"POSITION\",(function(e){f(j.concat([{code:e.code,position:e.position}]));var t=n.find((function(t){return t.code===e.code}));void 0===t?console.log(\"Truck not found\"):t.position=e.position})),function(){a.off(\"POSITION\")}})),Object(c.useEffect)((function(){return a.on(\"FAILURE\",(function(e){var t=e.code,c=e.source,i=n.find((function(e){return e.code===t}));if(void 0===typeof i)return\"Truck not found\";i.status=c})),function(){a.off(\"FAILURE\")}})),Object(c.useEffect)((function(){return a.on(\"FIX\",(function(e){console.log(\"solucionando el problema de: \"+e.code);var t=n.find((function(t){return t.code===e.code}));if(void 0===typeof t)return\"Truck not found\";t.status=\"Ok\"})),function(){a.off(\"FIX\")}}));return Object(u.jsxs)(\"div\",{children:[Object(u.jsx)(\"div\",{className:\"mapArea\",children:Object(u.jsxs)(d.a,{center:[-21.976193,-68.79],zoom:11,scrollWheelZoom:!1,children:[Object(u.jsx)(l.a,{attribution:'\\xa9 <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors',url:\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"}),n.map((function(e){return Object(u.jsx)(\"div\",{children:Object(u.jsx)(b.a,{pathOptions:{color:\"black\"},positions:[e.origin,e.destination]})},e.code)}))]})}),Object(u.jsx)(\"div\",{className:\"infoArea\",children:Object(u.jsxs)(\"div\",{className:\"info_titulo\",children:[Object(u.jsx)(\"div\",{children:Object(u.jsx)(\"h2\",{children:\"Trucks Information:\"})}),Object(u.jsx)(\"div\",{className:\"solo_info\",children:n.map((function(e,t){return Object(u.jsx)(\"div\",{children:Object(u.jsx)(\"div\",{children:Object(u.jsxs)(\"div\",{className:\"truckInfo_container\",children:[Object(u.jsxs)(\"div\",{children:[\"Truck: \",e.truck]}),Object(u.jsxs)(\"div\",{children:[\"Code: \",e.code]}),Object(u.jsxs)(\"div\",{children:[\"Origin: \",e.origin,\" \"]}),Object(u.jsxs)(\"div\",{children:[\"Destination: \",e.destination,\" \"]}),Object(u.jsxs)(\"div\",{children:[\"Status: \",e.status,\" \"]}),Object(u.jsx)(\"div\",{children:\"Ok\"!==e.status&&Object(u.jsx)(\"button\",{value:e.code,onClick:function(e){return function(e){a.emit(\"FIX\",{code:e})}(e.target.value)},children:\"Fix Truck\"})})]})})},t)}))})]})})]})});var O=function(){var e=Object(c.useState)(\"\"),t=Object(r.a)(e,2),n=t[0],i=t[1],o=Object(c.useState)(!1),s=Object(r.a)(o,2),d=s[0],l=s[1];return Object(u.jsx)(\"div\",{className:\"App\",children:Object(u.jsxs)(\"div\",{className:\"titleArea\",children:[Object(u.jsx)(\"h1\",{align:\"center\",children:\"Tarea 3\"}),!d&&Object(u.jsxs)(\"form\",{className:\"logIn\",onSubmit:function(e){a.emit(\"TRUCKS\"),e.preventDefault(),\"\"!==n&&l(!0)},children:[Object(u.jsx)(\"label\",{children:\" Escoja un nombre de usuario:\"}),Object(u.jsx)(\"input\",{value:n,onChange:function(e){return i(e.target.value)}}),Object(u.jsx)(\"button\",{children:\"Ingresar a la pagina\"})]}),d&&Object(u.jsxs)(\"div\",{className:\"chatArea\",children:[\" \",Object(u.jsx)(j,{username:n}),\" \"]}),d&&Object(u.jsx)(f,{})]})})};s.a.render(Object(u.jsx)(i.a.StrictMode,{children:Object(u.jsx)(O,{})}),document.getElementById(\"root\"))}},[[47,1,2]]]);","name":"static/js/main.91950faf.chunk.js","map":{"version":3,"sources":["static/js/main.91950faf.chunk.js"],"names":["this","push","module","exports","__webpack_require__","__webpack_exports__","r","react","react_default","n","react_dom","react_dom_default","slicedToArray","Socket","connect","path","jsx_runtime","componentes_Chat","_ref","username","_useState","Object","_useState2","mensaje","setMensaje","_useState3","_useState4","mensajes","setMensajes","_useState5","_useState6","_useState7","_useState8","on","_ref2","date","message","name","concat","off","className","children","map","e","i","Date","onSubmit","preventDefault","emit","htmlFor","id","cols","value","onChange","target","MapContainer","TileLayer","Polyline","componentes_Info","trucks","setTrucks","positions","setPosition","console","log","truck","obj","code","position","find","element","undefined","source","status","truck_object","center","zoom","scrollWheelZoom","attribution","url","dat","pathOptions","color","origin","destination","onClick","a","fixTruck","src_App","setUsername","registrado","setRegistrado","align","render","StrictMode","document","getElementById"],"mappings":"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"},"input":"(this[\"webpackJsonpcliente\"] = this[\"webpackJsonpcliente\"] || []).push([[0],{\n\n/***/ 29:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 38:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 45:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 47:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(0);\nvar react_default = /*#__PURE__*/__webpack_require__.n(react);\n\n// EXTERNAL MODULE: ./node_modules/react-dom/index.js\nvar react_dom = __webpack_require__(23);\nvar react_dom_default = /*#__PURE__*/__webpack_require__.n(react_dom);\n\n// EXTERNAL MODULE: ./src/index.css\nvar src = __webpack_require__(38);\n\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/slicedToArray.js + 3 modules\nvar slicedToArray = __webpack_require__(7);\n\n// CONCATENATED MODULE: ./src/componentes/Socket.js\n//import io from 'socket.io-client';\nvar io=__webpack_require__(46);var socket=io.connect('wss://tarea-3-websocket.2021-2.tallerdeintegracion.cl',{path:'/trucks'});/* harmony default export */ var Socket = (socket);\n// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js\nvar jsx_runtime = __webpack_require__(1);\n\n// CONCATENATED MODULE: ./src/componentes/Chat.js\nvar Chat_Chat=function Chat(_ref){var username=_ref.username;var _useState=Object(react[\"useState\"])(''),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),mensaje=_useState2[0],setMensaje=_useState2[1];var _useState3=Object(react[\"useState\"])([]),_useState4=Object(slicedToArray[\"a\" /* default */])(_useState3,2),mensajes=_useState4[0],setMensajes=_useState4[1];var _useState5=Object(react[\"useState\"])([]),_useState6=Object(slicedToArray[\"a\" /* default */])(_useState5,2),trucks=_useState6[0],setTrucks=_useState6[1];var _useState7=Object(react[\"useState\"])([[]]),_useState8=Object(slicedToArray[\"a\" /* default */])(_useState7,2),positions=_useState8[0],setPosition=_useState8[1];Object(react[\"useEffect\"])(function(){//console.log('recibiendo mensajes')\nSocket.on('CHAT',function(_ref2){var date=_ref2.date,message=_ref2.message,name=_ref2.name;//console.log(name+':'+message + '->('+date+')');\nsetMensajes(mensajes.concat({date:date,message:message,name:name}));});return function(){Socket.off('CHAT');};},[mensajes]);var submit=function submit(e){e.preventDefault();//console.log({message : mensaje, name : username})\nSocket.emit('CHAT',{message:mensaje,name:username});setMensaje(\"\");};return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"chat_todo\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h2\",{children:\"Chat\"})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"chat\",children:mensajes.map(function(e,i){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{children:[\"[\",Date(e.date),\"] -- \",e.name,\": \",e.message]})},i);})}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"form\",{className:\"chat_form\",onSubmit:submit,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"label\",{htmlFor:\"\",children:\" Escriba su mensaje :\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"textarea\",{name:\"\",id:\"\",cols:\"30\",value:mensaje,onChange:function onChange(e){return setMensaje(e.target.value);}}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{children:\" Enviar mensaje\"})]})]});};/* harmony default export */ var componentes_Chat = (Chat_Chat);\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\nvar createForOfIteratorHelper = __webpack_require__(25);\n\n// EXTERNAL MODULE: ./node_modules/react-leaflet/esm/MapContainer.js\nvar MapContainer = __webpack_require__(50);\n\n// EXTERNAL MODULE: ./node_modules/react-leaflet/esm/TileLayer.js + 1 modules\nvar TileLayer = __webpack_require__(52);\n\n// EXTERNAL MODULE: ./node_modules/react-leaflet/esm/Polyline.js\nvar Polyline = __webpack_require__(51);\n\n// EXTERNAL MODULE: ./src/componentes/Map.css\nvar Map = __webpack_require__(45);\n\n// EXTERNAL MODULE: ./src/App.css\nvar App = __webpack_require__(29);\n\n// CONCATENATED MODULE: ./src/componentes/Info.js\nvar Info_Info=function Info(){var _useState=Object(react[\"useState\"])([]),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),trucks=_useState2[0],setTrucks=_useState2[1];var _useState3=Object(react[\"useState\"])([[]]),_useState4=Object(slicedToArray[\"a\" /* default */])(_useState3,2),positions=_useState4[0],setPosition=_useState4[1];Object(react[\"useEffect\"])(function(){console.log('Recibiendo info de TRUCKS');Socket.on('TRUCKS',function(truck){//console.log('--->el code es' + truck[0].code)\nsetTrucks(trucks.concat(truck));});return function(){Socket.off('TRUCKS');};},[trucks]);Object(react[\"useEffect\"])(function(){Socket.on('POSITION',function(obj){setPosition(positions.concat([{code:obj.code,position:obj.position}]));var truck=trucks.find(function(element){return element.code===obj.code;});if(truck===undefined){console.log(\"Truck not found\");}else{truck.position=obj.position;//console.log('Nueva posicion de: ' + truck.truck + '['+ truck.position+ ']');\n}});return function(){Socket.off('POSITION');};});Object(react[\"useEffect\"])(function(){Socket.on('FAILURE',function(_ref){var code=_ref.code,source=_ref.source;var truck=trucks.find(function(element){return element.code===code;});if(typeof truck===undefined){return\"Truck not found\";}else{truck.status=source;}});return function(){Socket.off('FAILURE');};});Object(react[\"useEffect\"])(function(){Socket.on('FIX',function(truck_object){console.log('solucionando el problema de: '+truck_object.code);var truck=trucks.find(function(element){return element.code===truck_object.code;});if(typeof truck===undefined){return\"Truck not found\";}else{truck.status='Ok';}});return function(){Socket.off('FIX');};});var truckInfo=function truckInfo(code){var truck=trucks.find(function(element){return element.code===code;});//console.log(truck)\nif(truck===undefined){return\"Truck not found\";}//console.log('ahora tenemos' + truck)\nreturn/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"p\",{children:[\"'Truck:' \",truck.truck]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"br\",{}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"p\",{children:[\"'Code: '\",truck.code]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"br\",{}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"p\",{children:[\"'Origin: '\",truck.origin,\"' -- Destination: '\",truck.destination]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"br\",{}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"p\",{children:[\"'Status: '\",truck.status]}),\" \",/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"br\",{})]});};var fixTruck=function fixTruck(e){//console.log('Vamos a reparar el siguiente camion: ' + e);\nSocket.emit('FIX',{code:e});};var changeStatus=function changeStatus(){var _iterator=Object(createForOfIteratorHelper[\"a\" /* default */])(trucks),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var element=_step.value;if(element.status==undefined||element.status==''){element.status='Ok';}}}catch(err){_iterator.e(err);}finally{_iterator.f();}};return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"mapArea\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(MapContainer[\"a\" /* MapContainer */],{center:[-21.976193,-68.79],zoom:11,scrollWheelZoom:false,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(TileLayer[\"a\" /* TileLayer */],{attribution:\"\\xA9 <a href=\\\"http://osm.org/copyright\\\">OpenStreetMap</a> contributors\",url:\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"}),trucks.map(function(dat){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Polyline[\"a\" /* Polyline */],{pathOptions:{color:'black'},positions:[dat.origin,dat.destination]})},dat.code);})]})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"infoArea\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"info_titulo\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h2\",{children:\"Trucks Information:\"})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"solo_info\",children:trucks.map(function(e,i){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"truckInfo_container\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{children:[\"Truck: \",e.truck]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{children:[\"Code: \",e.code]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{children:[\"Origin: \",e.origin,\" \"]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{children:[\"Destination: \",e.destination,\" \"]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{children:[\"Status: \",e.status,\" \"]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{children:e.status!=='Ok'&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{value:e.code,onClick:function onClick(a){return fixTruck(a.target.value);},children:\"Fix Truck\"})})]})})},i);})})]})})]});};/* harmony default export */ var componentes_Info = (Info_Info);\n// CONCATENATED MODULE: ./src/App.js\nfunction App_App(){var _useState=Object(react[\"useState\"])(\"\"),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=Object(react[\"useState\"])(false),_useState4=Object(slicedToArray[\"a\" /* default */])(_useState3,2),registrado=_useState4[0],setRegistrado=_useState4[1];var registrar=function registrar(e){Socket.emit('TRUCKS');//console.log('Emitiendo TRUCKS')\n//console.log('el nombre de usuario es :' + username)\ne.preventDefault();if(username!==''){setRegistrado(true);//console.log('registrado = ' + registrado)\n}};return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"App\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"titleArea\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h1\",{align:\"center\",children:\"Tarea 3\"}),!registrado&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"form\",{className:\"logIn\",onSubmit:registrar,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"label\",{children:\" Escoja un nombre de usuario:\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{value:username,onChange:function onChange(e){return setUsername(e.target.value);}}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{children:\"Ingresar a la pagina\"})]}),registrado&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"chatArea\",children:[\" \",/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(componentes_Chat,{username:username}),\" \"]}),registrado&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(componentes_Info,{})]})});}/* harmony default export */ var src_App = (App_App);\n// CONCATENATED MODULE: ./src/index.js\n//import reportWebVitals from './reportWebVitals';\nreact_dom_default.a.render(/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_default.a.StrictMode,{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(src_App,{})}),document.getElementById('root'));// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n//reportWebVitals();\n\n/***/ })\n\n},[[47,1,2]]]);","inputSourceMap":{"version":3,"sources":["/home/thomas/Desktop/XII Semestre/Taller de Integración/Tarea 3/tarea-3-t-schilling/node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-4-0!/home/thomas/Desktop/XII Semestre/Taller de Integración/Tarea 3/tarea-3-t-schilling/node_modules/css-loader/dist/cjs.js??ref--5-oneOf-4-1!/home/thomas/Desktop/XII Semestre/Taller de Integración/Tarea 3/tarea-3-t-schilling/node_modules/postcss-loader/src/index.js??postcss!/home/thomas/Desktop/XII Semestre/Taller de Integración/Tarea 3/tarea-3-t-schilling/src/App.css","/home/thomas/Desktop/XII Semestre/Taller de Integración/Tarea 3/tarea-3-t-schilling/node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-4-0!/home/thomas/Desktop/XII Semestre/Taller de Integración/Tarea 3/tarea-3-t-schilling/node_modules/css-loader/dist/cjs.js??ref--5-oneOf-4-1!/home/thomas/Desktop/XII Semestre/Taller de Integración/Tarea 3/tarea-3-t-schilling/node_modules/postcss-loader/src/index.js??postcss!/home/thomas/Desktop/XII Semestre/Taller de Integración/Tarea 3/tarea-3-t-schilling/src/index.css","/home/thomas/Desktop/XII Semestre/Taller de Integración/Tarea 3/tarea-3-t-schilling/node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-4-0!/home/thomas/Desktop/XII Semestre/Taller de Integración/Tarea 3/tarea-3-t-schilling/node_modules/css-loader/dist/cjs.js??ref--5-oneOf-4-1!/home/thomas/Desktop/XII Semestre/Taller de Integración/Tarea 3/tarea-3-t-schilling/node_modules/postcss-loader/src/index.js??postcss!/home/thomas/Desktop/XII Semestre/Taller de Integración/Tarea 3/tarea-3-t-schilling/src/componentes/Map.css","/home/thomas/Desktop/XII Semestre/Taller de Integración/Tarea 3/tarea-3-t-schilling/src/componentes/Socket.js","/home/thomas/Desktop/XII Semestre/Taller de Integración/Tarea 3/tarea-3-t-schilling/src/componentes/Chat.js","/home/thomas/Desktop/XII Semestre/Taller de Integración/Tarea 3/tarea-3-t-schilling/src/componentes/Info.js","/home/thomas/Desktop/XII Semestre/Taller de Integración/Tarea 3/tarea-3-t-schilling/src/App.js","/home/thomas/Desktop/XII Semestre/Taller de Integración/Tarea 3/tarea-3-t-schilling/src/index.js"],"names":["io","require","socket","connect","path","Chat","username","useState","mensaje","setMensaje","mensajes","setMensajes","trucks","setTrucks","positions","setPosition","useEffect","on","date","message","name","concat","off","submit","e","preventDefault","emit","map","i","Date","target","value","Info","console","log","truck","obj","code","position","find","element","undefined","source","status","truck_object","truckInfo","origin","destination","fixTruck","changeStatus","dat","color","a","App","setUsername","registrado","setRegistrado","registrar","ReactDOM","render","document","getElementById"],"mappings":"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","file":"x","sourcesContent":["// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","//import io from 'socket.io-client';\n\nconst io = require(\"socket.io-client\");\n\nvar socket = io.connect('wss://tarea-3-websocket.2021-2.tallerdeintegracion.cl', {path: '/trucks'});\n\nexport default socket;","import React, {useState, useEffect} from 'react';\nimport socket from './Socket';\n\nconst Chat = ({username}) => {\n     \n    const [mensaje, setMensaje] = useState('');\n    const[mensajes, setMensajes] = useState([]);\n\n    const[trucks, setTrucks] = useState([]);\n    const[positions, setPosition] = useState([[]])\n\n\n    useEffect(() => {\n        //console.log('recibiendo mensajes')\n        socket.on('CHAT', ({date, message, name}) => {\n            //console.log(name+':'+message + '->('+date+')');\n            setMensajes(mensajes.concat({date, message, name}));\n        });\n        \n        return () => {\n            socket.off('CHAT');\n      };\n    },[mensajes]);\n\n    const submit = (e) => {\n        e.preventDefault();\n        //console.log({message : mensaje, name : username})\n        socket.emit('CHAT', {message : mensaje, name : username})\n        setMensaje(\"\");\n    }\n\n\n    return (\n\n        <div className=\"chat_todo\">\n            <div><h2>Chat</h2></div>\n            <div className=\"chat\"> \n                {mensajes.map((e,i) => <div  key={i}> \n                    <div>[{Date(e.date)}] -- {e.name}: {e.message}</div>\n                </div>)}\n            </div>\n            <form className=\"chat_form\" onSubmit={submit}>\n                <label htmlFor=\"\"> Escriba su mensaje : \n                </label>\n                <textarea name=\"\" id=\"\" cols=\"30\" value={mensaje} onChange={e => setMensaje(e.target.value)}>\n\n                </textarea>\n            <button> Enviar mensaje</button>\n\n\n            </form>\n\n        </div>\n    )\n}\n\nexport default Chat;","import React, {useState, useEffect} from 'react';\nimport socket from './Socket';\nimport { MapContainer, TileLayer, Polyline, Tooltip, Marker, Circle} from 'react-leaflet';\nimport './Map.css';\nimport './../App.css'\n\nconst Info = () => {\n\n    const[trucks, setTrucks] = useState([]);\n    const[positions, setPosition] = useState([[]]);\n\n    \n    useEffect(() => {\n        console.log('Recibiendo info de TRUCKS');\n        socket.on('TRUCKS', truck =>{\n            //console.log('--->el code es' + truck[0].code)\n            setTrucks(trucks.concat(truck));\n            \n\n        });\n        return () => {socket.off('TRUCKS')};\n    },[trucks]);\n\n    useEffect(() => {\n        \n        socket.on( 'POSITION', (obj) => {setPosition(positions.concat([{code: obj.code, position : obj.position}]));\n        let truck  = trucks.find(element => element.code === obj.code);\n            if (truck === undefined){\n                console.log( \"Truck not found\");\n            }\n            else{\n                truck.position = obj.position;\n                //console.log('Nueva posicion de: ' + truck.truck + '['+ truck.position+ ']');\n            } \n        });\n        return () => {socket.off('POSITION')};\n    });\n\n    useEffect(() => {\n        socket.on('FAILURE', ({code, source}) => { \n            let truck  = trucks.find(element => element.code === code);\n            if (typeof(truck) === undefined){\n                return \"Truck not found\";\n            }\n            else{\n                truck.status = source;\n            }\n        });\n        return () => {socket.off('FAILURE')}\n    });\n\n    useEffect(() => {\n        socket.on('FIX', (truck_object) =>{\n            console.log('solucionando el problema de: ' + truck_object.code);\n            let truck  = trucks.find(element => element.code === truck_object.code);\n            if (typeof(truck) === undefined){\n                return \"Truck not found\";\n            }\n            else{\n                truck.status = 'Ok';\n            }\n        });\n        return () => {socket.off('FIX')}\n    });\n\n    const truckInfo = (code) => {\n        let truck  = trucks.find(element => element.code === code);\n        //console.log(truck)\n        if (truck === undefined){\n            return (\"Truck not found\");\n        }\n        //console.log('ahora tenemos' + truck)\n        return (<div>\n            <p>'Truck:' {truck.truck}</p><br />\n            <p>'Code: '{truck.code}</p><br />\n            <p>'Origin: '{truck.origin}' -- Destination: '{truck.destination}</p><br />\n            <p>'Status: '{truck.status}</p> <br />\n        </div>)   \n    };\n\n    const fixTruck = (e) =>{\n        //console.log('Vamos a reparar el siguiente camion: ' + e);\n        socket.emit('FIX', {code : e});\n    }\n\n    const changeStatus = () => {\n        for (let element of trucks){\n            if(element.status == undefined || element.status == ''){\n                element.status = 'Ok';\n            }\n        }\n    }\n\n    return (\n        <div>\n            <div className=\"mapArea\">\n                <MapContainer center={[-21.976193,-68.79]} zoom={11} scrollWheelZoom={false}>\n                <TileLayer\n                attribution='&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n                url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n                />\n\n                {trucks.map((dat) => {\n                    return (\n                        <div key={dat.code}>\n                        <Polyline pathOptions={{color:'black'}} positions={[dat.origin, dat.destination]} />\n                        </div>\n                    )\n                })}\n                \n                \n                \n                \n            \n                    \n                </MapContainer>\n            </div>\n\n\n            \n        <div className=\"infoArea\">\n            <div className=\"info_titulo\">\n                <div><h2>Trucks Information:</h2></div>\n                <div className=\"solo_info\"> \n                    {trucks.map((e,i) => <div  key={i}> \n                    <div> \n                        <div className='truckInfo_container'>\n                        <div>Truck: {e.truck}</div>\n                        <div>Code: {e.code}</div>\n                        <div>Origin: {e.origin} </div>\n                        <div>Destination: {e.destination} </div>\n                        <div>Status: {e.status} </div>\n                        <div>\n                        {(e.status !== ('Ok')) && \n                            <button value={e.code} onClick={a => fixTruck(a.target.value)}>Fix Truck</button>}\n\n\n                    </div>\n                        </div>\n                    </div>\n                    </div>)}\n                </div>\n            </div>\n        </div>\n    </div>    \n\n    )\n}\n\nexport default Info;","import React, {useState} from 'react';\nimport socket from './componentes/Socket';\nimport Chat from './componentes/Chat';\nimport Info from './componentes/Info';\nimport './App.css';\n\nfunction App() {\n\n  const [username, setUsername] = useState(\"\");\n  const [registrado, setRegistrado] = useState(false);\n\n  const registrar = (e) => {\n    socket.emit('TRUCKS');\n    //console.log('Emitiendo TRUCKS')\n    //console.log('el nombre de usuario es :' + username)\n    e.preventDefault();\n    if (username !== ''){\n      setRegistrado(true);\n      //console.log('registrado = ' + registrado)\n    }\n  }\n\n\n\n  return (\n    <div className=\"App\">\n      <div className=\"titleArea\"><h1 align=\"center\">Tarea 3</h1>\n      \n      {\n        !registrado && \n\n        <form className=\"logIn\" onSubmit={registrar}>\n          <label> Escoja un nombre de usuario:</label>\n          <input value={username} onChange={e => setUsername(e.target.value)}></input>\n          <button>Ingresar a la pagina</button>\n        </form>\n      }\n      {\n        registrado &&\n\n        <div className=\"chatArea\"> <Chat username={username}/> </div>\n      }\n\n      {\n        registrado &&\n        \n          <Info/>\n      }\n\n\n    </div>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n//import reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n//reportWebVitals();\n"]}}