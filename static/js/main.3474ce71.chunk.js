(this.webpackJsonpcliente=this.webpackJsonpcliente||[]).push([[0],{29:function(e,t,n){},38:function(e,t,n){},45:function(e,t,n){},47:function(e,t,n){"use strict";n.r(t);var c=n(0),i=n.n(c),o=n(23),s=n.n(o),r=(n(38),n(7)),a=n(46).connect("wss://tarea-3-websocket.2021-2.tallerdeintegracion.cl",{path:"/trucks"}),u=n(1),j=function(e){var t=e.username,n=Object(c.useState)(""),i=Object(r.a)(n,2),o=i[0],s=i[1],j=Object(c.useState)([]),d=Object(r.a)(j,2),l=d[0],b=d[1],f=Object(c.useState)([]),O=Object(r.a)(f,2),h=(O[0],O[1],Object(c.useState)([[]])),m=Object(r.a)(h,2);m[0],m[1];Object(c.useEffect)((function(){return a.on("CHAT",(function(e){var t=e.date,n=e.message,c=e.name;b(l.concat({date:t,message:n,name:c}))})),function(){a.off("CHAT")}}),[l]);return Object(u.jsxs)("div",{className:"chat_todo",children:[Object(u.jsx)("div",{children:Object(u.jsx)("h2",{children:"Chat"})}),Object(u.jsx)("div",{className:"chat",children:l.map((function(e,t){return Object(u.jsx)("div",{children:Object(u.jsxs)("div",{children:["[",Date(e.date),"] -- ",e.name,": ",e.message]})},t)}))}),Object(u.jsxs)("form",{className:"chat_form",onSubmit:function(e){e.preventDefault(),a.emit("CHAT",{message:o,name:t}),s("")},children:[Object(u.jsx)("label",{htmlFor:"",children:" Escriba su mensaje :"}),Object(u.jsx)("textarea",{name:"",id:"",cols:"30",value:o,onChange:function(e){return s(e.target.value)}}),Object(u.jsx)("button",{children:" Enviar mensaje"})]})]})},d=(n(25),n(50)),l=n(52),b=n(51),f=(n(45),n(29),function(){var e=Object(c.useState)([]),t=Object(r.a)(e,2),n=t[0],i=t[1],o=Object(c.useState)([[]]),s=Object(r.a)(o,2),j=s[0],f=s[1];Object(c.useEffect)((function(){return console.log("Recibiendo info de TRUCKS"),a.on("TRUCKS",(function(e){i(n.concat(e))})),function(){a.off("TRUCKS")}}),[n]),Object(c.useEffect)((function(){return a.on("POSITION",(function(e){f(j.concat([{code:e.code,position:e.position}]));var t=n.find((function(t){return t.code===e.code}));void 0===t?console.log("Truck not found"):t.position=e.position})),function(){a.off("POSITION")}})),Object(c.useEffect)((function(){return a.on("FAILURE",(function(e){var t=e.code,c=e.source,i=n.find((function(e){return e.code===t}));if(void 0===typeof i)return"Truck not found";i.status=c})),function(){a.off("FAILURE")}})),Object(c.useEffect)((function(){return a.on("FIX",(function(e){console.log("solucionando el problema de: "+e.code);var t=n.find((function(t){return t.code===e.code}));if(void 0===typeof t)return"Truck not found";t.status="Ok"})),function(){a.off("FIX")}}));return Object(u.jsxs)("div",{children:[Object(u.jsx)("div",{className:"mapArea",children:Object(u.jsxs)(d.a,{center:[-21.976193,-68.79],zoom:11,scrollWheelZoom:!1,children:[Object(u.jsx)(l.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),n.map((function(e){return Object(u.jsx)("div",{children:Object(u.jsx)(b.a,{pathOptions:{color:"black"},positions:[e.origin,e.destination]})},e.code)}))]})}),Object(u.jsx)("div",{className:"infoArea",children:Object(u.jsxs)("div",{className:"info_titulo",children:[Object(u.jsx)("div",{children:Object(u.jsx)("h2",{children:"Trucks Information:"})}),Object(u.jsx)("div",{className:"solo_info",children:n.map((function(e,t){return Object(u.jsx)("div",{children:Object(u.jsx)("div",{children:Object(u.jsxs)("div",{className:"truckInfo_container",children:[Object(u.jsxs)("div",{children:["Truck: ",e.truck]}),Object(u.jsxs)("div",{children:["Code: ",e.code]}),Object(u.jsxs)("div",{children:["Origin: ",e.origin," "]}),Object(u.jsxs)("div",{children:["Destination: ",e.destination," "]}),Object(u.jsxs)("div",{children:["Status: ",e.status," "]}),Object(u.jsx)("div",{children:"Ok"!==e.status&&Object(u.jsx)("button",{value:e.code,onClick:function(e){return function(e){a.emit("FIX",{code:e})}(e.target.value)},children:"Fix Truck"})})]})})},t)}))})]})})]})});var O=function(){var e=Object(c.useState)(""),t=Object(r.a)(e,2),n=t[0],i=t[1],o=Object(c.useState)(!1),s=Object(r.a)(o,2),d=s[0],l=s[1];return Object(u.jsx)("div",{className:"App",children:Object(u.jsxs)("div",{className:"titleArea",children:[Object(u.jsx)("h1",{align:"center",children:"Tarea 3"}),!d&&Object(u.jsxs)("form",{className:"logIn",onSubmit:function(e){a.emit("TRUCKS"),e.preventDefault(),""!==n&&l(!0)},children:[Object(u.jsx)("label",{children:" Escoja un nombre de usuario:"}),Object(u.jsx)("input",{value:n,onChange:function(e){return i(e.target.value)}}),Object(u.jsx)("button",{children:"Ingresar a la pagina"})]}),d&&Object(u.jsxs)("div",{className:"chatArea",children:[" ",Object(u.jsx)(j,{username:n})," "]}),d&&Object(u.jsx)(f,{})]})})};s.a.render(Object(u.jsx)(i.a.StrictMode,{children:Object(u.jsx)(O,{})}),document.getElementById("root"))}},[[47,1,2]]]);
//# sourceMappingURL=main.3474ce71.chunk.js.map